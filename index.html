<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="description" content="Holy Link - Create beautiful smart links for your music">
  <title>Holy Link - Music Smart Links</title>
  
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#667eea">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icon-192.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <style>
    /* ==================== RESET & VARIABLES ==================== */
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    :root {
      --primary: #667eea;
      --primary-dark: #764ba2;
      --accent: #1db954;
      --accent-hover: #1ed760;
      --danger: #ff4757;
      --warning: #ffa502;
      --success: #2ed573;
      --bg-dark: #0f0f1a;
      --bg-card: rgba(255, 255, 255, 0.1);
      --bg-card-solid: #1a1a2e;
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.8);
      --text-muted: rgba(255, 255, 255, 0.5);
      --border: rgba(255, 255, 255, 0.1);
      --radius-sm: 8px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-full: 50px;
      --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      --transition: 0.3s ease;
      --font: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    
    [data-theme="light"] {
      --bg-dark: #f5f7fa;
      --bg-card: rgba(255, 255, 255, 0.9);
      --bg-card-solid: #ffffff;
      --text-primary: #1a1a2e;
      --text-secondary: rgba(26, 26, 46, 0.8);
      --text-muted: rgba(26, 26, 46, 0.5);
      --border: rgba(0, 0, 0, 0.1);
    }
    
    /* ==================== BASE ==================== */
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: var(--font);
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    /* ==================== UTILITIES ==================== */
    .hidden { display: none !important; }
    .text-center { text-align: center; }
    .text-muted { color: var(--text-muted); }
    .mt-1 { margin-top: 8px; }
    .mt-2 { margin-top: 16px; }
    .mt-3 { margin-top: 24px; }
    .mb-1 { margin-bottom: 8px; }
    .mb-2 { margin-bottom: 16px; }
    .mb-3 { margin-bottom: 24px; }
    
    /* ==================== APP CONTAINER ==================== */
    .app {
      min-height: 100vh;
    }
    
    /* ==================== SCREENS ==================== */
    .screen {
      display: none;
      min-height: 100vh;
      padding: 20px;
    }
    
    .screen.active {
      display: block;
    }
    
    .screen-content {
      max-width: 480px;
      margin: 0 auto;
    }
    
    /* ==================== WELCOME SCREEN ==================== */
    .welcome-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 40px 20px;
    }
    
    .welcome-logo {
      font-size: 64px;
      margin-bottom: 20px;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .welcome-title {
      font-size: 42px;
      font-weight: 900;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #fff, #e0e0e0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .welcome-subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      margin-bottom: 40px;
      max-width: 300px;
    }
    
    .welcome-buttons {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 100%;
      max-width: 320px;
    }
    
    /* ==================== BUTTONS ==================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 16px 32px;
      border: none;
      border-radius: var(--radius-full);
      font-family: var(--font);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
    }
    
    .btn-primary {
      background: white;
      color: var(--primary);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
    }
    
    .btn-secondary {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .btn-accent {
      background: var(--accent);
      color: white;
    }
    
    .btn-accent:hover {
      background: var(--accent-hover);
    }
    
    .btn-danger {
      background: var(--danger);
      color: white;
    }
    
    .btn-block {
      width: 100%;
    }
    
    .btn-sm {
      padding: 10px 20px;
      font-size: 14px;
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none !important;
    }
    
    .btn:active:not(:disabled) {
      transform: scale(0.98);
    }
    
    .btn-loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-loading::before {
      content: '';
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ==================== FORMS ==================== */
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text-secondary);
    }
    
    .form-input {
      width: 100%;
      padding: 16px 20px;
      background: var(--bg-card-solid);
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      font-family: var(--font);
      font-size: 16px;
      color: var(--text-primary);
      transition: var(--transition);
    }
    
    .form-input:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2);
    }
    
    .form-input.error {
      border-color: var(--danger);
      box-shadow: 0 4px 15px rgba(255, 71, 87, 0.1);
    }
    
    .form-input::placeholder {
      color: var(--text-muted);
    }
    
    .form-input[type="number"]::-webkit-outer-spin-button,
    .form-input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    .form-input[type="number"] {
      appearance: textfield;
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .form-hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 6px;
    }
    
    .form-error {
      color: var(--danger);
      font-size: 12px;
      margin-top: 6px;
      display: flex;
      align-items: center;
      gap: 4px;
      animation: slideDown 0.2s ease;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* ==================== CARDS ==================== */
    .card {
      background: var(--bg-card);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }
    
    .card:hover {
      border-color: var(--accent);
      box-shadow: 0 8px 30px rgba(102, 126, 234, 0.1);
    }
    
    .card-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--text-primary);
    }
    
    .form-input[type="date"],
    .form-input[type="time"],
    .form-input select {
      cursor: pointer;
    }
    
    .form-input select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ffffff' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 15px center;
      padding-right: 40px;
    }
    
    [data-theme="light"] .form-input select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231a1a2e' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    }
    
    /* ==================== AUTH SCREENS ==================== */
    .auth-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
    }
    
    .auth-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .auth-logo {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .auth-title {
      font-size: 28px;
      font-weight: 800;
    }
    
    .auth-subtitle {
      color: var(--text-secondary);
      margin-top: 8px;
    }
    
    .auth-form {
      max-width: 400px;
      margin: 0 auto;
      width: 100%;
    }
    
    .auth-footer {
      text-align: center;
      margin-top: 24px;
    }
    
    .auth-footer a {
      color: white;
      font-weight: 600;
      text-decoration: underline;
      cursor: pointer;
    }
    
    /* ==================== SETUP WIZARD ==================== */
    .wizard {
      padding: 20px;
    }
    
    .wizard-progress {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
    }
    
    .wizard-step {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: var(--transition);
    }
    
    .wizard-step.active {
      background: white;
      transform: scale(1.2);
    }
    
    .wizard-step.completed {
      background: var(--accent);
    }
    
    .wizard-content {
      max-width: 480px;
      margin: 0 auto;
    }
    
    .wizard-title {
      font-size: 28px;
      font-weight: 800;
      text-align: center;
      margin-bottom: 10px;
    }
    
    .wizard-subtitle {
      text-align: center;
      color: var(--text-secondary);
      margin-bottom: 40px;
    }
    
    .wizard-buttons {
      display: flex;
      gap: 16px;
      margin-top: 30px;
    }
    
    .wizard-buttons .btn {
      flex: 1;
    }
    
    /* ==================== IMAGE UPLOAD ==================== */
    .image-upload {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .image-preview {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: var(--bg-card-solid);
      border: 4px dashed var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .image-preview:hover {
      border-color: var(--accent);
    }
    
    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .image-preview-placeholder {
      font-size: 48px;
      color: var(--text-muted);
    }
    
    .image-upload-input {
      display: none;
    }
    
    .image-upload-label {
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
    }
    
    /* ==================== PLATFORM INPUTS ==================== */
    .platform-inputs {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .platform-input {
      display: flex;
      align-items: center;
      gap: 12px;
      background: var(--bg-card-solid);
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      padding: 12px 16px;
      transition: var(--transition);
    }
    
    .platform-input:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
    }
    
    .platform-input:focus-within {
      border-color: var(--accent);
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2);
    }
    
    .platform-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }
    
    .platform-icon.spotify { background: #1db954; }
    .platform-icon.apple { background: #fc3c44; }
    .platform-icon.youtube { background: #ff0000; }
    .platform-icon.amazon { background: #00a8e1; }
    .platform-icon.deezer { background: #a238ff; }
    .platform-icon.tidal { background: #000; }
    .platform-icon.soundcloud { background: #ff5500; }
    .platform-icon.audiomack { background: #ffa200; }
    .platform-icon.boomplay { background: #e91e63; }
    .platform-icon.pandora { background: #005483; }
    .platform-icon.tiktok { background: #000; }
    .platform-icon.instagram { background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045); }
    .platform-icon.twitter { background: #1da1f2; }
    .platform-icon.facebook { background: #1877f2; }
    .platform-icon.website { background: #667eea; }
    
    .platform-input input {
      flex: 1;
      background: none;
      border: none;
      font-family: var(--font);
      font-size: 14px;
      color: var(--text-primary);
      outline: none;
    }
    
    .platform-input input::placeholder {
      color: var(--text-muted);
    }
    
    /* ==================== DASHBOARD ==================== */
    .dashboard {
      padding-bottom: 100px;
    }
    
    .dashboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 0;
      margin-bottom: 20px;
    }
    
    .dashboard-logo {
      font-size: 24px;
      font-weight: 800;
    }
    
    .dashboard-actions {
      display: flex;
      gap: 10px;
    }
    
    .icon-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--bg-card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .icon-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }
    
    .icon-btn:active {
      transform: scale(0.95);
    }
    
    /* ==================== STATS GRID ==================== */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }
    
    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 24px;
      font-weight: 800;
      color: var(--accent);
    }
    
    .stat-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 4px;
    }
    
    /* ==================== RELEASE CARD ==================== */
    .release-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: 20px;
    }
    
    .release-header {
      display: flex;
      gap: 16px;
      padding: 20px;
    }
    
    .release-cover {
      width: 100px;
      height: 100px;
      border-radius: var(--radius-md);
      object-fit: cover;
      background: var(--bg-card-solid);
    }
    
    .release-info {
      flex: 1;
    }
    
    .release-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .release-artist {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }
    
    .release-meta {
      font-size: 12px;
      color: var(--text-muted);
    }
    
    .release-actions {
      display: flex;
      gap: 10px;
      padding: 0 20px 20px;
    }
    
    .release-actions .btn {
      flex: 1;
    }
    
    /* ==================== PREVIEW PAGE ==================== */
    .preview-container {
      max-width: 480px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .preview-header {
      text-align: center;
      padding: 40px 0 30px;
    }
    
    .preview-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 4px solid rgba(255, 255, 255, 0.3);
      object-fit: cover;
      margin-bottom: 16px;
    }
    
    .preview-name {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 8px;
    }
    
    .preview-bio {
      color: var(--text-secondary);
      font-size: 14px;
    }
    
    .preview-song {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 24px;
      text-align: center;
      margin: 24px 0;
    }
    
    .preview-song-cover {
      width: 180px;
      height: 180px;
      border-radius: var(--radius-md);
      object-fit: cover;
      margin: 0 auto 16px;
      box-shadow: var(--shadow);
    }
    
    .preview-song-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .preview-song-meta {
      font-size: 14px;
      color: var(--text-muted);
    }
    
    .preview-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 24px 0;
    }
    
    .preview-btn {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px 20px;
      background: var(--bg-card-solid);
      border-radius: var(--radius-full);
      color: white;
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
    }
    
    .preview-btn:hover {
      transform: translateX(5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }
    
    .preview-btn:active {
      transform: translateX(3px);
    }
    
    .preview-btn .icon {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .preview-btn .arrow {
      margin-left: auto;
      opacity: 0.5;
    }
    
    .preview-social {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 30px 0;
    }
    
    .preview-social-link {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--bg-card);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      transition: var(--transition);
    }
    
    .preview-social-link:hover {
      transform: translateY(-3px);
    }
    
    .preview-footer {
      text-align: center;
      padding: 30px;
      font-size: 12px;
      color: var(--text-muted);
    }
    
    /* ==================== MODALS ==================== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }
    
    .modal-overlay.active {
      display: flex;
    }
    
    .modal {
      background: var(--bg-card-solid);
      border-radius: var(--radius-lg);
      padding: 30px;
      max-width: 400px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .modal-title {
      font-size: 20px;
      font-weight: 700;
    }
    
    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--bg-card);
      border: none;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-primary);
    }
    
    /* ==================== TOAST ==================== */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--bg-card-solid);
      color: var(--text-primary);
      padding: 16px 32px;
      border-radius: var(--radius-full);
      font-size: 14px;
      font-weight: 600;
      box-shadow: var(--shadow);
      z-index: 2000;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    
    .toast.success { border-left: 4px solid var(--success); }
    .toast.error { border-left: 4px solid var(--danger); }
    .toast.warning { border-left: 4px solid var(--warning); }
    
    /* ==================== BOTTOM NAV ==================== */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card-solid);
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      z-index: 100;
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 16px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .nav-item.active {
      color: var(--accent);
    }
    
    .nav-item .icon {
      font-size: 24px;
    }
    
    /* ==================== EMPTY STATE ==================== */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }
    
    .empty-state .icon {
      font-size: 64px;
      margin-bottom: 20px;
      opacity: 0.5;
    }
    
    .empty-state h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }
    
    .empty-state p {
      color: var(--text-muted);
      margin-bottom: 24px;
    }
    
    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 480px) {
      .welcome-title {
        font-size: 32px;
      }
      
      .wizard-title {
        font-size: 24px;
      }
      
      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
      }
      
      .stat-value {
        font-size: 20px;
      }
    }
    
    /* ==================== ACCESSIBILITY ==================== */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
    
    @media (prefers-contrast: more) {
      :root {
        --border: rgba(255, 255, 255, 0.3);
      }
      
      .btn-secondary {
        border-width: 3px;
      }
    }
    
    /* Focus visible for keyboard navigation */
    .btn:focus-visible,
    .form-input:focus-visible,
    .icon-btn:focus-visible {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }
    
    @media (pointer: coarse) {
      .btn,
      .icon-btn,
      .nav-item {
        min-height: 48px;
        min-width: 48px;
      }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    
    <!-- ==================== WELCOME SCREEN ==================== -->
    <div class="screen welcome-screen" id="welcomeScreen">
      <div class="welcome-logo">üéµ</div>
      <h1 class="welcome-title">Holy Link</h1>
      <p class="welcome-subtitle">Create beautiful smart links for your music in minutes</p>
      <div class="welcome-buttons">
        <button class="btn btn-primary btn-block" onclick="showScreen('signupScreen')">
          Get Started Free
        </button>
        <button class="btn btn-secondary btn-block" onclick="showScreen('loginScreen')">
          I Have an Account
        </button>
      </div>
    </div>
    
    <!-- ==================== SIGNUP SCREEN ==================== -->
    <div class="screen auth-screen" id="signupScreen">
      <div class="screen-content">
        <div class="auth-header">
          <div class="auth-logo">üéµ</div>
          <h1 class="auth-title">Create Account</h1>
          <p class="auth-subtitle">Start sharing your music today</p>
        </div>
        <form class="auth-form" id="signupForm" onsubmit="handleSignup(event)">
          <div class="form-group">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-input" id="signupName" placeholder="Enter your name" required>
          </div>
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" class="form-input" id="signupEmail" placeholder="you@example.com" required>
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" class="form-input" id="signupPassword" placeholder="Min. 6 characters" minlength="6" required>
          </div>
          <button type="submit" class="btn btn-accent btn-block">Create Account</button>
        </form>
        <div class="auth-footer">
          Already have an account? <a onclick="showScreen('loginScreen')">Sign In</a>
        </div>
      </div>
    </div>
    
    <!-- ==================== LOGIN SCREEN ==================== -->
    <div class="screen auth-screen" id="loginScreen">
      <div class="screen-content">
        <div class="auth-header">
          <div class="auth-logo">üéµ</div>
          <h1 class="auth-title">Welcome Back</h1>
          <p class="auth-subtitle">Sign in to your account</p>
        </div>
        <form class="auth-form" id="loginForm" onsubmit="handleLogin(event)">
          <div class="form-group">
            <label class="form-label">Email Address</label>
            <input type="email" class="form-input" id="loginEmail" placeholder="you@example.com" required>
          </div>
          <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" class="form-input" id="loginPassword" placeholder="Enter password" required>
          </div>
          <button type="submit" class="btn btn-accent btn-block">Sign In</button>
        </form>
        <div class="auth-footer">
          Don't have an account? <a onclick="showScreen('signupScreen')">Sign Up</a>
        </div>
      </div>
    </div>
    
    <!-- ==================== SETUP WIZARD ==================== -->
    <div class="screen wizard" id="wizardScreen">
      <div class="wizard-progress" id="wizardProgress">
        <div class="wizard-step active" data-step="1"></div>
        <div class="wizard-step" data-step="2"></div>
        <div class="wizard-step" data-step="3"></div>
        <div class="wizard-step" data-step="4"></div>
      </div>
      
      <div class="wizard-content">
        
        <!-- Step 1: Artist Profile -->
        <div class="wizard-step-content" id="wizardStep1">
          <h2 class="wizard-title">Your Artist Profile</h2>
          <p class="wizard-subtitle">Tell us about yourself</p>
          
          <div class="image-upload">
            <div class="image-preview" onclick="document.getElementById('artistImageInput').click()">
              <span class="image-preview-placeholder" id="artistImagePlaceholder">üì∑</span>
              <img id="artistImagePreview" class="hidden" alt="Artist">
            </div>
            <input type="file" id="artistImageInput" class="image-upload-input" accept="image/*" onchange="handleImageUpload(this, 'artistImagePreview', 'artistImagePlaceholder')">
            <label class="image-upload-label">Upload Profile Photo</label>
          </div>
          
          <div class="form-group">
            <label class="form-label">Artist/Band Name *</label>
            <input type="text" class="form-input" id="artistName" placeholder="Your stage name" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Bio</label>
            <textarea class="form-input form-textarea" id="artistBio" placeholder="Tell fans about yourself..."></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Genre</label>
            <input type="text" class="form-input" id="artistGenre" placeholder="e.g. Gospel, Hip-Hop, Afrobeats">
          </div>
          
          <div class="wizard-buttons">
            <button class="btn btn-secondary" onclick="showScreen('dashboardScreen')">Skip</button>
            <button class="btn btn-accent" onclick="nextWizardStep()">Continue</button>
          </div>
        </div>
        
        <!-- Step 2: Release Details -->
        <div class="wizard-step-content hidden" id="wizardStep2">
          <h2 class="wizard-title">Add Your Release</h2>
          <p class="wizard-subtitle">Enter your song or album details</p>
          
          <div class="image-upload">
            <div class="image-preview" onclick="document.getElementById('coverImageInput').click()">
              <span class="image-preview-placeholder" id="coverImagePlaceholder">üéµ</span>
              <img id="coverImagePreview" class="hidden" alt="Cover">
            </div>
            <input type="file" id="coverImageInput" class="image-upload-input" accept="image/*" onchange="handleImageUpload(this, 'coverImagePreview', 'coverImagePlaceholder')">
            <label class="image-upload-label">Upload Cover Art</label>
          </div>
          
          <div class="form-group">
            <label class="form-label">Song/Album Title *</label>
            <input type="text" class="form-input" id="releaseTitle" placeholder="Enter title" required>
          </div>
          
          <div class="form-group">
            <label class="form-label">Release Type</label>
            <select class="form-input" id="releaseType">
              <option value="single">Single</option>
              <option value="ep">EP</option>
              <option value="album">Album</option>
              <option value="mixtape">Mixtape</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Release Year</label>
            <input type="number" class="form-input" id="releaseYear" placeholder="2025" value="2025">
          </div>
          
          <div class="wizard-buttons">
            <button class="btn btn-secondary" onclick="prevWizardStep()">Back</button>
            <button class="btn btn-accent" onclick="nextWizardStep()">Continue</button>
          </div>
        </div>
        
        <!-- Step 3: Streaming Links -->
        <div class="wizard-step-content hidden" id="wizardStep3">
          <h2 class="wizard-title">Streaming Links</h2>
          <p class="wizard-subtitle">Add links where fans can stream your music</p>
          
          <div class="platform-inputs">
            <div class="platform-input">
              <div class="platform-icon spotify">üéµ</div>
              <input type="url" id="linkSpotify" placeholder="Spotify link">
            </div>
            <div class="platform-input">
              <div class="platform-icon apple">üçé</div>
              <input type="url" id="linkApple" placeholder="Apple Music link">
            </div>
            <div class="platform-input">
              <div class="platform-icon youtube">‚ñ∂Ô∏è</div>
              <input type="url" id="linkYoutube" placeholder="YouTube Music link">
            </div>
            <div class="platform-input">
              <div class="platform-icon audiomack">üîä</div>
              <input type="url" id="linkAudiomack" placeholder="Audiomack link">
            </div>
            <div class="platform-input">
              <div class="platform-icon boomplay">üí•</div>
              <input type="url" id="linkBoomplay" placeholder="Boomplay link">
            </div>
            <div class="platform-input">
              <div class="platform-icon deezer">üíú</div>
              <input type="url" id="linkDeezer" placeholder="Deezer link">
            </div>
            <div class="platform-input">
              <div class="platform-icon soundcloud">‚òÅÔ∏è</div>
              <input type="url" id="linkSoundcloud" placeholder="SoundCloud link">
            </div>
            <div class="platform-input">
              <div class="platform-icon amazon">üì¶</div>
              <input type="url" id="linkAmazon" placeholder="Amazon Music link">
            </div>
            <div class="platform-input">
              <div class="platform-icon tidal">üåä</div>
              <input type="url" id="linkTidal" placeholder="TIDAL link">
            </div>
          </div>
          
          <p class="form-hint mt-2">üí° Leave blank any platforms you're not on</p>
          
          <div class="wizard-buttons">
            <button class="btn btn-secondary" onclick="prevWizardStep()">Back</button>
            <button class="btn btn-accent" onclick="nextWizardStep()">Continue</button>
          </div>
        </div>
        
        <!-- Step 4: Social Links -->
        <div class="wizard-step-content hidden" id="wizardStep4">
          <h2 class="wizard-title">Social Media</h2>
          <p class="wizard-subtitle">Connect with your fans everywhere</p>
          
          <div class="platform-inputs">
            <div class="platform-input">
              <div class="platform-icon instagram">üì∏</div>
              <input type="url" id="socialInstagram" placeholder="Instagram profile URL">
            </div>
            <div class="platform-input">
              <div class="platform-icon tiktok">üéµ</div>
              <input type="url" id="socialTiktok" placeholder="TikTok profile URL">
            </div>
            <div class="platform-input">
              <div class="platform-icon twitter">üê¶</div>
              <input type="url" id="socialTwitter" placeholder="Twitter/X profile URL">
            </div>
            <div class="platform-input">
              <div class="platform-icon facebook">üìò</div>
              <input type="url" id="socialFacebook" placeholder="Facebook page URL">
            </div>
            <div class="platform-input">
              <div class="platform-icon youtube">‚ñ∂Ô∏è</div>
              <input type="url" id="socialYoutube" placeholder="YouTube channel URL">
            </div>
            <div class="platform-input">
              <div class="platform-icon website">üåê</div>
              <input type="url" id="socialWebsite" placeholder="Your website URL">
            </div>
          </div>
          
          <div class="wizard-buttons">
            <button class="btn btn-secondary" onclick="prevWizardStep()">Back</button>
            <button class="btn btn-accent" onclick="completeWizard()">Finish Setup</button>
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- ==================== DASHBOARD SCREEN ==================== -->
    <div class="screen dashboard" id="dashboardScreen">
      <div class="screen-content">
        
        <div class="dashboard-header">
          <div class="dashboard-logo">üéµ Holy Link</div>
          <div class="dashboard-actions">
            <button class="icon-btn" onclick="toggleTheme()" title="Toggle theme">üåô</button>
            <button class="icon-btn" onclick="showModal('settingsModal')" title="Settings">‚öôÔ∏è</button>
          </div>
        </div>
        
        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="statClicks">0</div>
            <div class="stat-label">Clicks</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statViews">0</div>
            <div class="stat-label">Views</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="statShares">0</div>
            <div class="stat-label">Shares</div>
          </div>
        </div>
        
        <!-- Releases -->
        <div class="card">
          <h3 class="card-title">Your Releases</h3>
          <div id="releasesList">
            <!-- Dynamically populated -->
          </div>
          <button class="btn btn-accent btn-block mt-2" onclick="showModal('addReleaseModal')">
            + Add New Release
          </button>
        </div>
        
      </div>
      
      <!-- Bottom Navigation -->
      <nav class="bottom-nav">
        <div class="nav-item active" onclick="showDashboardTab('home')">
          <span class="icon">üè†</span>
          Home
        </div>
        <div class="nav-item" onclick="showDashboardTab('analytics')">
          <span class="icon">üìä</span>
          Analytics
        </div>
        <div class="nav-item" onclick="previewLink()">
          <span class="icon">üëÅÔ∏è</span>
          Preview
        </div>
        <div class="nav-item" onclick="shareLink()">
          <span class="icon">üîó</span>
          Share
        </div>
      </nav>
    </div>
    
    <!-- ==================== PREVIEW SCREEN ==================== -->
    <div class="screen" id="previewScreen">
      <div class="preview-container" id="previewContainer">
        <!-- Dynamically generated preview -->
      </div>
      <button class="btn btn-secondary" style="position:fixed;top:20px;left:20px;z-index:100;" onclick="showScreen('dashboardScreen')">
        ‚Üê Back
      </button>
    </div>
    
  </div>
  
  <!-- ==================== MODALS ==================== -->
  
  <!-- Settings Modal -->
  <div class="modal-overlay" id="settingsModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Settings</h3>
        <button class="modal-close" onclick="hideModal('settingsModal')">√ó</button>
      </div>
      <div class="form-group">
        <label class="form-label">Your Holy Link URL</label>
        <div style="display:flex;gap:10px;">
          <input type="text" class="form-input" id="shareLinkUrl" readonly>
          <button class="btn btn-sm btn-accent" onclick="copyShareLink()">Copy</button>
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">Theme</label>
        <select class="form-input" onchange="setTheme(this.value)">
          <option value="dark">Dark Mode</option>
          <option value="light">Light Mode</option>
        </select>
      </div>
      <hr style="border:none;border-top:1px solid var(--border);margin:20px 0;">
      <button class="btn btn-danger btn-block" onclick="logout()">Sign Out</button>
      <button class="btn btn-secondary btn-block mt-2" onclick="resetAccount()">Delete Account</button>
    </div>
  </div>
  
  <!-- Add Release Modal -->
  <div class="modal-overlay" id="addReleaseModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Add New Release</h3>
        <button class="modal-close" onclick="hideModal('addReleaseModal')">√ó</button>
      </div>
      <form onsubmit="addRelease(event)">
        <div class="form-group">
          <label class="form-label">Title *</label>
          <input type="text" class="form-input" id="newReleaseTitle" placeholder="Song or album title" required>
        </div>
        <div class="form-group">
          <label class="form-label">Type</label>
          <select class="form-input" id="newReleaseType">
            <option value="single">Single</option>
            <option value="ep">EP</option>
            <option value="album">Album</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Spotify Link</label>
          <input type="url" class="form-input" id="newReleaseSpotify" placeholder="https://open.spotify.com/...">
        </div>
        <div class="form-group">
          <label class="form-label">Apple Music Link</label>
          <input type="url" class="form-input" id="newReleaseApple" placeholder="https://music.apple.com/...">
        </div>
        <div class="form-group">
          <label class="form-label">YouTube Link</label>
          <input type="url" class="form-input" id="newReleaseYoutube" placeholder="https://music.youtube.com/...">
        </div>
        <button type="submit" class="btn btn-accent btn-block">Add Release</button>
      </form>
    </div>
  </div>
  
  <!-- Toast -->
  <div class="toast" id="toast"></div>
  
  <!-- ==================== JAVASCRIPT ==================== -->
  <script>
    // ==================== STATE ====================
    let currentUser = null;
    let currentWizardStep = 1;
    const totalWizardSteps = 4;
    let isLoading = false;
    
    // ==================== INPUT VALIDATION ====================
    function addInputValidation() {
      // Email validation on blur
      const emailInputs = document.querySelectorAll('input[type="email"]');
      emailInputs.forEach(input => {
        input.addEventListener('blur', function() {
          if (this.value && !isValidEmail(this.value)) {
            this.classList.add('error');
          } else {
            this.classList.remove('error');
          }
        });
        
        input.addEventListener('input', function() {
          if (this.classList.contains('error') && isValidEmail(this.value)) {
            this.classList.remove('error');
          }
        });
      });
      
      // URL validation
      const urlInputs = document.querySelectorAll('input[type="url"]');
      urlInputs.forEach(input => {
        input.addEventListener('blur', function() {
          if (this.value && !isValidUrl(this.value)) {
            this.classList.add('error');
          } else {
            this.classList.remove('error');
          }
        });
        
        input.addEventListener('input', function() {
          if (this.classList.contains('error') && isValidUrl(this.value)) {
            this.classList.remove('error');
          }
        });
      });
    }
    
    function isValidUrl(string) {
      try {
        new URL(string);
        return true;
      } catch (_) {
        return false;
      }
    }
    
    // ==================== INITIALIZATION ====================
    function init() {
      // Check for existing user
      const savedUser = localStorage.getItem('holylink_user');
      if (savedUser) {
        try {
          currentUser = JSON.parse(savedUser);
          if (currentUser.setupComplete) {
            showScreen('dashboardScreen');
            renderDashboard();
          } else {
            showScreen('wizardScreen');
            updateWizardUI();
          }
        } catch (e) {
          console.error('Failed to load user:', e);
          localStorage.removeItem('holylink_user');
          showScreen('welcomeScreen');
        }
      } else {
        showScreen('welcomeScreen');
      }
      
      // Load theme
      const savedTheme = localStorage.getItem('holylink_theme');
      if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
      }
      
      // Add input validation
      addInputValidation();
      
      // Register service worker
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').catch(err => {
          console.log('SW registration failed:', err);
        });
      }
    }
    
    // ==================== SCREEN MANAGEMENT ====================
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
    }
    
    // ==================== TOAST ====================
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast ' + type + ' show';
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
    
    // ==================== MODALS ====================
    function showModal(modalId) {
      document.getElementById(modalId).classList.add('active');
    }
    
    function hideModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }
    
    // ==================== AUTH ====================
    function handleSignup(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('signupName');
      const emailInput = document.getElementById('signupEmail');
      const passwordInput = document.getElementById('signupPassword');
      
      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const password = passwordInput.value;
      
      // Clear previous errors
      [nameInput, emailInput, passwordInput].forEach(el => el.classList.remove('error'));
      
      // Validate
      let hasError = false;
      
      if (!name) {
        nameInput.classList.add('error');
        hasError = true;
      }
      
      if (!email || !isValidEmail(email)) {
        emailInput.classList.add('error');
        hasError = true;
      }
      
      if (!password || password.length < 6) {
        passwordInput.classList.add('error');
        hasError = true;
      }
      
      if (hasError) {
        showToast('Please fix the errors above', 'error');
        return;
      }
      
      // Simulate network delay
      setLoading(true, e.target.querySelector('button[type="submit"]'));
      
      setTimeout(() => {
        // Create user
        currentUser = {
          id: Date.now().toString(),
          name,
          email,
          password,
          createdAt: new Date().toISOString(),
          setupComplete: false,
          profile: {},
          releases: [],
          stats: { clicks: 0, views: 0, shares: 0 }
        };
        
        saveUser();
        setLoading(false, e.target.querySelector('button[type="submit"]'));
        showToast('Account created successfully! üéâ');
        
        // Reset form
        document.getElementById('signupForm').reset();
        
        // Delay navigation slightly for better UX
        setTimeout(() => {
          showScreen('wizardScreen');
          updateWizardUI();
        }, 200);
      }, 600);
    }
    
    function handleLogin(e) {
      e.preventDefault();
      
      const emailInput = document.getElementById('loginEmail');
      const passwordInput = document.getElementById('loginPassword');
      
      const email = emailInput.value.trim();
      const password = passwordInput.value;
      
      // Clear previous errors
      [emailInput, passwordInput].forEach(el => el.classList.remove('error'));
      
      if (!email || !isValidEmail(email)) {
        emailInput.classList.add('error');
        showToast('Please enter a valid email', 'error');
        return;
      }
      
      if (!password) {
        passwordInput.classList.add('error');
        showToast('Please enter your password', 'error');
        return;
      }
      
      setLoading(true, e.target.querySelector('button[type="submit"]'));
      
      setTimeout(() => {
        const savedUser = localStorage.getItem('holylink_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          if (user.email === email && user.password === password) {
            currentUser = user;
            setLoading(false, e.target.querySelector('button[type="submit"]'));
            showToast('Welcome back! üëã');
            document.getElementById('loginForm').reset();
            
            setTimeout(() => {
              if (currentUser.setupComplete) {
                showScreen('dashboardScreen');
                renderDashboard();
              } else {
                showScreen('wizardScreen');
                updateWizardUI();
              }
            }, 200);
            return;
          }
        }
        
        setLoading(false, e.target.querySelector('button[type="submit"]'));
        emailInput.classList.add('error');
        passwordInput.classList.add('error');
        showToast('Invalid email or password', 'error');
      }, 600);
    }
    
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }
    
    function setLoading(loading, button) {
      isLoading = loading;
      if (button) {
        button.disabled = loading;
        if (loading) {
          button.dataset.originalText = button.textContent;
          button.innerHTML = '<span class="btn-loading"></span>';
        } else {
          button.textContent = button.dataset.originalText || 'Submit';
        }
      }
    }
    
    function logout() {
      if (confirm('Are you sure you want to sign out?')) {
        currentUser = null;
        hideModal('settingsModal');
        showScreen('welcomeScreen');
        showToast('Signed out successfully');
      }
    }
    
    function resetAccount() {
      if (confirm('‚ö†Ô∏è This will permanently delete all your data and releases. This cannot be undone. Continue?')) {
        localStorage.removeItem('holylink_user');
        currentUser = null;
        hideModal('settingsModal');
        showScreen('welcomeScreen');
        showToast('Account deleted permanently');
      }
    }
    
    function saveUser() {
      localStorage.setItem('holylink_user', JSON.stringify(currentUser));
    }
    
    // ==================== WIZARD ====================
    function nextWizardStep() {
      // Validate current step before proceeding
      const isValid = validateWizardStep(currentWizardStep);
      if (!isValid) {
        showToast('Please fill in all required fields', 'error');
        return;
      }
      
      // Save current step data
      if (currentWizardStep === 1) {
        currentUser.profile = {
          ...currentUser.profile,
          artistName: document.getElementById('artistName').value.trim(),
          bio: document.getElementById('artistBio').value.trim(),
          genre: document.getElementById('artistGenre').value.trim(),
          image: document.getElementById('artistImagePreview').src || ''
        };
      }
      
      if (currentWizardStep === 2) {
        const title = document.getElementById('releaseTitle').value.trim();
        currentUser.releases = [{
          id: Date.now().toString(),
          title,
          type: document.getElementById('releaseType').value,
          year: document.getElementById('releaseYear').value,
          cover: document.getElementById('coverImagePreview').src || '',
          links: {},
          createdAt: new Date().toISOString()
        }];
      }
      
      if (currentWizardStep === 3) {
        if (currentUser.releases.length > 0) {
          currentUser.releases[0].links = {
            spotify: document.getElementById('linkSpotify').value.trim(),
            apple: document.getElementById('linkApple').value.trim(),
            youtube: document.getElementById('linkYoutube').value.trim(),
            audiomack: document.getElementById('linkAudiomack').value.trim(),
            boomplay: document.getElementById('linkBoomplay').value.trim(),
            deezer: document.getElementById('linkDeezer').value.trim(),
            soundcloud: document.getElementById('linkSoundcloud').value.trim(),
            amazon: document.getElementById('linkAmazon').value.trim(),
            tidal: document.getElementById('linkTidal').value.trim()
          };
        }
      }
      
      saveUser();
      
      // Move to next step with animation
      if (currentWizardStep < totalWizardSteps) {
        currentWizardStep++;
        updateWizardUI();
      }
    }
    
    function validateWizardStep(step) {
      if (step === 1) {
        const artistName = document.getElementById('artistName').value.trim();
        return artistName.length > 0;
      }
      
      if (step === 2) {
        const title = document.getElementById('releaseTitle').value.trim();
        return title.length > 0;
      }
      
      // Steps 3 and 4 are optional, always valid
      return true;
    }
    
    function prevWizardStep() {
      if (currentWizardStep > 1) {
        currentWizardStep--;
        updateWizardUI();
      }
    }
    
    function updateWizardUI() {
      // Update progress dots
      document.querySelectorAll('.wizard-step').forEach((step, index) => {
        step.classList.remove('active', 'completed');
        if (index + 1 === currentWizardStep) {
          step.classList.add('active');
        } else if (index + 1 < currentWizardStep) {
          step.classList.add('completed');
        }
      });
      
      // Show current step content
      for (let i = 1; i <= totalWizardSteps; i++) {
        const stepEl = document.getElementById(`wizardStep${i}`);
        if (stepEl) {
          stepEl.classList.toggle('hidden', i !== currentWizardStep);
        }
      }
    }
    
    function completeWizard() {
      // Save social links
      currentUser.profile.social = {
        instagram: document.getElementById('socialInstagram').value.trim(),
        tiktok: document.getElementById('socialTiktok').value.trim(),
        twitter: document.getElementById('socialTwitter').value.trim(),
        facebook: document.getElementById('socialFacebook').value.trim(),
        youtube: document.getElementById('socialYoutube').value.trim(),
        website: document.getElementById('socialWebsite').value.trim()
      };
      
      currentUser.setupComplete = true;
      saveUser();
      
      showToast('Setup complete! üéâ');
      
      // Add slight delay for better UX
      setTimeout(() => {
        showScreen('dashboardScreen');
        renderDashboard();
      }, 300);
    }
    
    // ==================== IMAGE UPLOAD ====================
    function handleImageUpload(input, previewId, placeholderId) {
      const file = input.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById(previewId);
          const placeholder = document.getElementById(placeholderId);
          preview.src = e.target.result;
          preview.classList.remove('hidden');
          placeholder.classList.add('hidden');
        };
        reader.readAsDataURL(file);
      }
    }
    
    // ==================== DASHBOARD ====================
    function renderDashboard() {
      if (!currentUser) return;
      
      // Update stats
      document.getElementById('statClicks').textContent = currentUser.stats.clicks || 0;
      document.getElementById('statViews').textContent = currentUser.stats.views || 0;
      document.getElementById('statShares').textContent = currentUser.stats.shares || 0;
      
      // Update share link
      const shareUrl = `${window.location.origin}${window.location.pathname}?u=${currentUser.id}`;
      document.getElementById('shareLinkUrl').value = shareUrl;
      
      // Render releases
      const releasesList = document.getElementById('releasesList');
      
      if (currentUser.releases && currentUser.releases.length > 0) {
        releasesList.innerHTML = currentUser.releases.map(release => `
          <div class="release-card">
            <div class="release-header">
              <img src="${release.cover || 'https://via.placeholder.com/100x100?text=üéµ'}" alt="${release.title}" class="release-cover">
              <div class="release-info">
                <div class="release-title">${release.title}</div>
                <div class="release-artist">${currentUser.profile.artistName || 'Unknown Artist'}</div>
                <div class="release-meta">${release.type} ‚Ä¢ ${release.year}</div>
              </div>
            </div>
            <div class="release-actions">
              <button class="btn btn-sm btn-secondary" onclick="editRelease('${release.id}')">Edit</button>
              <button class="btn btn-sm btn-accent" onclick="previewLink()">Preview</button>
            </div>
          </div>
        `).join('');
      } else {
        releasesList.innerHTML = `
          <div class="empty-state">
            <div class="icon">üéµ</div>
            <h3>No releases yet</h3>
            <p>Add your first song or album to get started</p>
          </div>
        `;
      }
    }
    
    function addRelease(e) {
      e.preventDefault();
      
      const titleInput = document.getElementById('newReleaseTitle');
      const title = titleInput.value.trim();
      
      if (!title) {
        titleInput.classList.add('error');
        showToast('Please enter a title', 'error');
        return;
      }
      
      titleInput.classList.remove('error');
      
      const submitBtn = e.target.querySelector('button[type="submit"]');
      setLoading(true, submitBtn);
      
      setTimeout(() => {
        const newRelease = {
          id: Date.now().toString(),
          title,
          type: document.getElementById('newReleaseType').value,
          year: new Date().getFullYear(),
          cover: '',
          links: {
            spotify: document.getElementById('newReleaseSpotify').value.trim(),
            apple: document.getElementById('newReleaseApple').value.trim(),
            youtube: document.getElementById('newReleaseYoutube').value.trim()
          },
          createdAt: new Date().toISOString()
        };
        
        currentUser.releases.push(newRelease);
        saveUser();
        
        setLoading(false, submitBtn);
        hideModal('addReleaseModal');
        renderDashboard();
        showToast('Release added successfully! üéµ');
        
        // Clear form
        e.target.reset();
      }, 500);
    }
    
    function editRelease(id) {
      // TODO: Implement edit functionality
      showToast('‚ú® Edit feature coming soon!', 'warning');
    }
    
    function showDashboardTab(tab) {
      const navItems = document.querySelectorAll('.nav-item');
      navItems.forEach(item => item.classList.remove('active'));
      
      // Find and activate the clicked item
      event.target.closest('.nav-item').classList.add('active');
      
      if (tab === 'analytics') {
        showToast('üìä Analytics feature coming soon!', 'warning');
      } else if (tab === 'home') {
        // Already on home
      }
    }
    
    // ==================== PREVIEW ====================
    function previewLink() {
      if (!currentUser || !currentUser.releases || currentUser.releases.length === 0) {
        showToast('Add a release first', 'warning');
        return;
      }
      
      const release = currentUser.releases[0];
      const profile = currentUser.profile;
      
      const container = document.getElementById('previewContainer');
      
      // Build streaming links HTML with fallback colors
      const streamingLinks = [
        { key: 'spotify', icon: 'üéµ', label: 'Spotify', color: '#1db954' },
        { key: 'apple', icon: 'üçé', label: 'Apple Music', color: '#fc3c44' },
        { key: 'youtube', icon: '‚ñ∂Ô∏è', label: 'YouTube Music', color: '#ff0000' },
        { key: 'audiomack', icon: 'üîä', label: 'Audiomack', color: '#ffa200' },
        { key: 'boomplay', icon: 'üí•', label: 'Boomplay', color: '#e91e63' },
        { key: 'deezer', icon: 'üíú', label: 'Deezer', color: '#a238ff' },
        { key: 'soundcloud', icon: '‚òÅÔ∏è', label: 'SoundCloud', color: '#ff5500' },
        { key: 'amazon', icon: 'üì¶', label: 'Amazon Music', color: '#00a8e1' },
        { key: 'tidal', icon: 'üåä', label: 'TIDAL', color: '#000' }
      ].filter(platform => release.links[platform.key])
        .map(platform => `
          <a href="${release.links[platform.key]}" target="_blank" rel="noopener noreferrer" class="preview-btn" style="background:${platform.color};" title="${platform.label}">
            <span class="icon">${platform.icon}</span>
            <span>${platform.label}</span>
            <span class="arrow">‚Üí</span>
          </a>
        `).join('');
      
      // Build social links HTML
      const socialLinks = profile.social ? [
        { url: profile.social.instagram, icon: 'üì∏', label: 'Instagram' },
        { url: profile.social.tiktok, icon: 'üéµ', label: 'TikTok' },
        { url: profile.social.twitter, icon: 'üê¶', label: 'Twitter' },
        { url: profile.social.facebook, icon: 'üìò', label: 'Facebook' },
        { url: profile.social.youtube, icon: '‚ñ∂Ô∏è', label: 'YouTube' },
        { url: profile.social.website, icon: 'üåê', label: 'Website' }
      ].filter(link => link.url)
        .map(link => `<a href="${link.url}" target="_blank" rel="noopener noreferrer" class="preview-social-link" title="${link.label}">${link.icon}</a>`)
        .join('') : '';
      
      container.innerHTML = `
        <div class="preview-header">
          <img src="${profile.image || 'https://via.placeholder.com/120x120?text=üéµ'}" alt="${profile.artistName}" class="preview-avatar">
          <h1 class="preview-name">${profile.artistName || 'Artist'}</h1>
          <p class="preview-bio">${profile.bio || profile.genre || ''}</p>
        </div>
        
        <div class="preview-song">
          <img src="${release.cover || 'https://via.placeholder.com/180x180?text=üéµ'}" alt="${release.title}" class="preview-song-cover" loading="lazy">
          <h2 class="preview-song-title">${release.title}</h2>
          <p class="preview-song-meta">${release.type.charAt(0).toUpperCase() + release.type.slice(1)} ‚Ä¢ ${release.year}</p>
        </div>
        
        <div class="preview-buttons">
          ${streamingLinks}
        </div>
        
        ${socialLinks ? `<div class="preview-social">${socialLinks}</div>` : ''}
        
        <div class="preview-footer">
          <p>üéµ Powered by Holy Link</p>
        </div>
      `;
      
      showScreen('previewScreen');
      
      // Track view
      currentUser.stats.views = (currentUser.stats.views || 0) + 1;
      saveUser();
      renderDashboard();
    }
    
    function shareLink() {
      const url = `${window.location.origin}${window.location.pathname}?u=${currentUser.id}`;
      
      if (navigator.share) {
        navigator.share({
          title: `${currentUser.profile.artistName} - ${currentUser.releases[0]?.title || 'Music'}`,
          text: 'üéµ Check out my new music on Holy Link!',
          url: url
        }).then(() => {
          currentUser.stats.shares = (currentUser.stats.shares || 0) + 1;
          saveUser();
          renderDashboard();
          showToast('Shared successfully! üéâ');
        }).catch(err => {
          if (err.name !== 'AbortError') {
            console.log(err);
          }
        });
      } else {
        copyShareLink();
      }
    }
    
    function copyShareLink() {
      const url = document.getElementById('shareLinkUrl').value;
      
      if (navigator.clipboard) {
        navigator.clipboard.writeText(url).then(() => {
          showToast('Link copied to clipboard! üìã');
          currentUser.stats.shares = (currentUser.stats.shares || 0) + 1;
          saveUser();
          renderDashboard();
        }).catch(() => {
          fallbackCopyToClipboard(url);
        });
      } else {
        fallbackCopyToClipboard(url);
      }
    }
    
    function fallbackCopyToClipboard(url) {
      const textarea = document.createElement('textarea');
      textarea.value = url;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
        showToast('Link copied! üìã');
      } catch (err) {
        showToast('Failed to copy link', 'error');
      }
      document.body.removeChild(textarea);
    }
    
    // ==================== THEME ====================
    function toggleTheme() {
      const current = document.documentElement.getAttribute('data-theme');
      const newTheme = current === 'light' ? 'dark' : 'light';
      setTheme(newTheme);
    }
    
    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('holylink_theme', theme);
    }
    
    // ==================== PUBLIC PAGE LOADER ====================
    function checkPublicPage() {
      const params = new URLSearchParams(window.location.search);
      const userId = params.get('u');
      
      if (userId) {
        // Load public page (in production, fetch from backend)
        const savedUser = localStorage.getItem('holylink_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          if (user.id === userId) {
            currentUser = user;
            previewLink();
            return true;
          }
        }
      }
      return false;
    }
    
    // ==================== START APP ====================
    document.addEventListener('DOMContentLoaded', () => {
      if (!checkPublicPage()) {
        init();
      }
    });
  </script>
</body>
</html>